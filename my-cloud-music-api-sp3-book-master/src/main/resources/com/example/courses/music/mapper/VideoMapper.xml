<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"  >
<mapper namespace="com.example.courses.music.mapper.VideoMapper">
    <!--视频列表-->
    <select id="findAllDetail" resultType="com.example.courses.music.model.Video">
        <include refid="select"></include>
        order by video.created_at desc
    </select>

    <!--查询视频-->
    <select id="findDetail" resultType="com.example.courses.music.model.Video">
        <include refid="select"></include>
        where video.id = #{data}
    </select>

    <!--视频查询sql-->
    <sql id="select">
        select
            video.id,
            video.title,
            video.icon,
            video.duration,
            video.uri,
            video.width,
            video.height,
            video.clicks_count,
            video.likes_count,
            video.comments_count,
            video.created_at,
            video.updated_at,

            user.id as "user.id",
            user.nickname as "user.nickname",
            user.icon as "user.icon"

        from video
                 left join user on video.user_id = user.id
    </sql>
</mapper>